<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Firebase Auth + One Tap UI on Android</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Firebase Auth + One Tap UI on Android</h1>
</header>
<section data-field="subtitle" class="p-summary">
Learn how to implement One Tap sign-in and sign-up on your existing Firebase Android app
</section>
<section data-field="body" class="e-content">
<section name="ec2b" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><figure name="0284" id="0284" class="graf graf--figure graf--leading"><img class="graf-image" data-image-id="1*EFU8DF1LUfr1jLhoU_178A.png" data-width="1051" data-height="320" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*EFU8DF1LUfr1jLhoU_178A.png"></figure><h3 name="d877" id="d877" class="graf graf--h3 graf-after--figure graf--title">Firebase Auth + One Tap UI on Android</h3><h4 name="8a85" id="8a85" class="graf graf--h4 graf-after--h3 graf--subtitle">Learn how to implement One Tap sign-in and sign-up on your existing Firebase Android app</h4><p name="8795" id="8795" class="graf graf--p graf-after--h4">Google has recently introduced <a href="https://developers.google.com/identity/one-tap/android/overview" data-href="https://developers.google.com/identity/one-tap/android/overview" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">One Tap sign-in and sign-up on Android</a>. This service allows your app’s new users to create an account, securely with just a single tap on a beautiful dialog.<br>Users who already have an account can also have the same experience, so they don’t need to remember the username or password they had previously used when they created an account in that app.<br>You can read more about One Tap in <a href="https://medium.com/androiddevelopers/one-tap-sign-in-for-android-apps-2259ce15bc2c" data-href="https://medium.com/androiddevelopers/one-tap-sign-in-for-android-apps-2259ce15bc2c" class="markup--anchor markup--p-anchor" target="_blank">this other post</a>.</p><p name="47ac" id="47ac" class="graf graf--p graf-after--p">Here’s what that beautiful dialog looks like:</p><figure name="4a48" id="4a48" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*ExyWmpskey_jr471HiLKAw.png" data-width="378" data-height="296" src="https://cdn-images-1.medium.com/max/800/1*ExyWmpskey_jr471HiLKAw.png"></figure><p name="fe9b" id="fe9b" class="graf graf--p graf-after--figure">In this post, I’ll show you how to connect the One Tap UI with Firebase Authentication.</p><h3 name="6ec3" id="6ec3" class="graf graf--h3 graf-after--p">Firebase Auth with Google Sign-In</h3><p name="878a" id="878a" class="graf graf--p graf-after--h3">I’ll assume that you’ve already implemented Google Sign-in using Firebase Auth on your Android app, so I’ll not go over the steps on how to do that. But if you haven’t, you can still do so by following <a href="https://firebase.google.com/docs/auth/android/google-signin#kotlin" data-href="https://firebase.google.com/docs/auth/android/google-signin#kotlin" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">this guide on the documentation</a>. Also, I’ll be using some of the methods created on this same documentation, so in case you see a method/property that you don’t recognize, please be sure to look for it on that page or on the <a href="https://github.com/rosariopfernandes/FirebaseAuthOneTapUI" data-href="https://github.com/rosariopfernandes/FirebaseAuthOneTapUI" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">sample app</a> I’ve created.</p><p name="4427" id="4427" class="graf graf--p graf-after--p">Google’s One Tap UI comes bundled in <code class="markup--code markup--p-code">com.google.android.gms:play-services-auth</code> , which you might already be using, since this library is needed when you’re implementing Google Sign-In. Just check the dependencies on your <code class="markup--code markup--p-code">build.gradle(app)</code> file to make sure you’re using version <code class="markup--code markup--p-code">18.0.0</code> or higher.</p><p name="fc95" id="fc95" class="graf graf--p graf-after--p">Now the next thing we need to do is declare some variables and initialize them on the Activity’s <code class="markup--code markup--p-code">onCreate()</code> or (in my case) the fragment’s <code class="markup--code markup--p-code">onViewCreated()</code>:</p><figure name="7f81" id="7f81" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/rosariopfernandes/f7bd29804eb0a1e9f9281df8c9925278.js"></script></figure><p name="0fe2" id="0fe2" class="graf graf--p graf-after--figure">Notice that on our <code class="markup--code markup--p-code">BeginSignInRequest</code> we’re setting <code class="markup--code markup--p-code">filterByAuthorizedAccounts</code> to <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">true</strong></code>. This means the OneTap UI will only display accounts that have previously logged in to this app. If you’re displaying the Google Sign -In option on a <strong class="markup--strong markup--p-strong">Sign up </strong>screen, you should set <code class="markup--code markup--p-code">filterByAuthorizedAccounts</code> to <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">false</strong></code> instead, so that the UI displays all user accounts available on that Android device.</p><p name="2faf" id="2faf" class="graf graf--p graf-after--p">Those variables that we just declared will be used to initiate the One Tap sign-in flow on our <code class="markup--code markup--p-code">updateUI()</code> method (the one called from <code class="markup--code markup--p-code">onStart()</code>):</p><figure name="7816" id="7816" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/rosariopfernandes/0f01ca88560f9fa7cde5344bd6a7fafe.js"></script></figure><p name="b67b" id="b67b" class="graf graf--p graf-after--figure">If the <code class="markup--code markup--p-code">OnFailureListener</code> gets executed, it means the user has never logged in to this app before or another error occurred. One other error that might happen is the 24-hour cooldown period, which the OneTap UI uses as a way to limit the prompts that it shows. If you face this error during development, the <a href="https://developers.google.com/identity/one-tap/android/get-saved-credentials#disable-one-tap" data-href="https://developers.google.com/identity/one-tap/android/get-saved-credentials#disable-one-tap" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">documentation</a> recommends:</p><blockquote name="471f" id="471f" class="graf graf--blockquote graf--startsWithDoubleQuote graf-after--p">“… reset the cooldown by clearing Google Play services’ app storage.”</blockquote><p name="f828" id="f828" class="graf graf--p graf-after--blockquote">But otherwise, if the SuccessListener gets executed instead, <code class="markup--code markup--p-code">startIntentSenderForResult()</code> will display the One Tap UI for users to select the account they wish to use in order to continue. So we need to update our <code class="markup--code markup--p-code">onActivityResult</code> code in order to receive and handle the result coming from One Tap:</p><figure name="5fda" id="5fda" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/rosariopfernandes/f2da359f21c970953af6fcefaa263a42.js"></script></figure><p name="8310" id="8310" class="graf graf--p graf-after--figure">Note that if the user closes the One Tap UI, <code class="markup--code markup--p-code">getSignInCredentialFromIntent()</code> returns an <code class="markup--code markup--p-code">ApiException</code> with the status code <code class="markup--code markup--p-code u-paddingRight0 u-marginRight0">CommonStatusCodes.<em class="markup--em markup--p-em">CANCELED</em></code>. In that case, we set our variable back to <code class="markup--code markup--p-code">false</code> and we don’t prompt the user again. Although using this variable may work fine, you can also use <code class="markup--code markup--p-code"><a href="https://developer.android.com/training/data-storage/shared-preferences" data-href="https://developer.android.com/training/data-storage/shared-preferences" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">SharedPreferences</a></code> instead, if you prefer.</p><p name="724f" id="724f" class="graf graf--p graf-after--p">And that’s it! You can now run your app and test the One Tap UI. This is what the One Tap UI with Google Sign-In should look like:</p><figure name="2377" id="2377" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*FuwCdQ0PckQcE_Bg4KfkoQ.png" data-width="360" data-height="616" src="https://cdn-images-1.medium.com/max/800/1*FuwCdQ0PckQcE_Bg4KfkoQ.png"></figure><h3 name="faf0" id="faf0" class="graf graf--h3 graf-after--figure">Firebase Auth with Email/Password</h3><p name="b9a0" id="b9a0" class="graf graf--p graf-after--h3">If your app also provides Email/Password authentication, One Tap UI can also help your users signing in to your app using that method. You’ll need to update the <code class="markup--code markup--p-code">BeginSignInRequest</code> we created earlier and handle the result in the <code class="markup--code markup--p-code">onActivityResult()</code> function:</p><figure name="2e2f" id="2e2f" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/rosariopfernandes/3d14688c547283c09ef9054f1c38392a.js"></script></figure><p name="f2ff" id="f2ff" class="graf graf--p graf-after--figure">This password request feature is backed by the <a href="https://developer.android.com/guide/topics/text/autofill" data-href="https://developer.android.com/guide/topics/text/autofill" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Autofill</a> framework which was introduced in Android 8.0 (API level 26), so you’ll need to <a href="https://developer.android.com/guide/topics/text/autofill-optimize#kotlin" data-href="https://developer.android.com/guide/topics/text/autofill-optimize#kotlin" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">optimize your app for Autofill</a>. This means you should add <code class="markup--code markup--p-code">android:autofillHints</code> to your <code class="markup--code markup--p-code">EditText</code>’s XML as shown below:</p><figure name="d8fb" id="d8fb" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/rosariopfernandes/ca5d2cbf8d68ddb4747d2511c3772264.js"></script></figure><p name="4cd1" id="4cd1" class="graf graf--p graf-after--figure">And this should do it. Now in order to test this feature, you’ll need to enable Autofill on your testing device, if you’re not already using it. To do that, make sure your device is running Android 8.0 (or above) and navigate to <strong class="markup--strong markup--p-strong">Settings &gt; System &gt; Language and Input &gt; Autofill</strong> and select an Autofill framework.</p><p name="53f1" id="53f1" class="graf graf--p graf-after--p">Once you login for the first time on the app, Autofill will prompt if you want to save your credentials. If you accept, the next time you login to the app, One Tap UI should display your saved credentials:</p><figure name="307c" id="307c" class="graf graf--figure graf-after--p graf--trailing"><img class="graf-image" data-image-id="1*g98h9zqiHJRtRS94YA9ShA.png" data-width="360" data-height="616" src="https://cdn-images-1.medium.com/max/800/1*g98h9zqiHJRtRS94YA9ShA.png"></figure></div></div></section><section name="87d3" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="bee3" id="bee3" class="graf graf--p graf--leading">Additionally, if you also have a website or a web app on the same Firebase project, you can also <a href="https://developers.google.com/identity/smartlock-passwords/android/associate-apps-and-sites" data-href="https://developers.google.com/identity/smartlock-passwords/android/associate-apps-and-sites" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">enable automatic sign-in between apps and websites</a>, which will allow your users to sign-in to your web app with the password they saved on the mobile app and vice-versa.</p><p name="270a" id="270a" class="graf graf--p graf-after--p">And that’s all for today. I hope this helps you implement One Tap sign-in and sign-up in your Firebase Apps. You can find the sample app on Github:</p><div name="2283" id="2283" class="graf graf--mixtapeEmbed graf-after--p graf--trailing"><a href="https://github.com/rosariopfernandes/FirebaseAuthOneTapUI" data-href="https://github.com/rosariopfernandes/FirebaseAuthOneTapUI" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/rosariopfernandes/FirebaseAuthOneTapUI"><strong class="markup--strong markup--mixtapeEmbed-strong">rosariopfernandes/FirebaseAuthOneTapUI</strong><br><em class="markup--em markup--mixtapeEmbed-em">Sample app to demonstrate how to use Firebase Authentication with Google One Tap UI …</em>github.com</a><a href="https://github.com/rosariopfernandes/FirebaseAuthOneTapUI" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="6bb81455ec1016b3d9a1337003a29b7c" data-thumbnail-img-id="0*wCL1btrz6LKURFq9" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*wCL1btrz6LKURFq9);"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@thatfire.dev" class="p-author h-card">Rosário Pereira Fernandes</a> on <a href="https://medium.com/p/86ca80a80973"><time class="dt-published" datetime="2020-04-29T23:56:23.569Z">April 29, 2020</time></a>.</p><p><a href="https://medium.com/@thatfire.dev/firebase-auth-one-tap-86ca80a80973" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 24, 2025.</p></footer></article></body></html>