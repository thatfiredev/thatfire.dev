<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Firebase Database para Desenvolvedores SQL‚Ää‚Äî‚ÄäQueries simples</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Firebase Database para Desenvolvedores SQL‚Ää‚Äî‚ÄäQueries simples</h1>
</header>
<section data-field="subtitle" class="p-summary">
Uma s√©rie para desenvolvedores SQL poderem come√ßar a utilizar o Firebase.
</section>
<section data-field="description" class="p-summary">
Depois de explicar algumas opera√ß√µes b√°sicas da Realtime Database, fiquei com a d√≠vida de mostrar outras formas de leitura de dados. E √© sobre isso que falarei neste artigo. Bom, normalmente, quando‚Ä¶
</section>
<section data-field="body" class="e-content">
<section name="73cd" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><figure name="061a" id="061a" class="graf graf--figure graf--leading"><img class="graf-image" data-image-id="1*6te-lQLMM128FEZxJJCwKQ.png" data-width="1043" data-height="313" src="https://cdn-images-1.medium.com/max/800/1*6te-lQLMM128FEZxJJCwKQ.png"></figure><h3 name="422a" id="422a" class="graf graf--h3 graf-after--figure graf--title">Firebase Database para Desenvolvedores SQL‚Ää‚Äî‚ÄäQueries¬†simples</h3><p name="c6f2" id="c6f2" class="graf graf--p graf-after--h3 graf--trailing"><strong class="markup--strong markup--p-strong">ATEN√á√ÉO! O FIREBASE TEM AGORA O </strong><a href="https://medium.com/android-dev-moz/firestore-8d225062ffe8" data-href="https://medium.com/android-dev-moz/firestore-8d225062ffe8" class="markup--anchor markup--p-anchor" target="_blank"><strong class="markup--strong markup--p-strong">CLOUD FIRESTORE</strong></a><strong class="markup--strong markup--p-strong"> QUE √â UM SERVI√áO DE BASE DE DADOS MAIS SIMPLES DE ESTRUTURAR. SE VOC√ä ESTIVER A COME√áAR UM PROJECTO, RECOMENDO QUE UTILIZE O </strong><a href="https://medium.com/android-dev-moz/firestore-8d225062ffe8" data-href="https://medium.com/android-dev-moz/firestore-8d225062ffe8" class="markup--anchor markup--p-anchor" target="_blank"><strong class="markup--strong markup--p-strong">FIRESTORE</strong></a><strong class="markup--strong markup--p-strong"> AO INV√âS DA REALTIME DATABASE.</strong></p></div></div></section><section name="5a3c" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="5e75" id="5e75" class="graf graf--p graf--leading">Depois de explicar <a href="https://medium.com/p/4ee3d26a3d15" data-href="https://medium.com/p/4ee3d26a3d15" class="markup--anchor markup--p-anchor" target="_blank">algumas opera√ß√µes b√°sicas da Realtime Database</a>, fiquei com a d√≠vida de mostrar outras formas de leitura de dados. E √© sobre isso que falarei neste artigo.</p><p name="d9c3" id="d9c3" class="graf graf--p graf-after--p">Bom, normalmente, quando desenvolvemos uma aplica√ß√£o em SQL, a nossa forma de pensar √© a seguinte:<br>‚ÄúTeremos todos os dados em tabelas, e quando precisarmos de algo, basta criar uma API para ir buscar esses dados e coloc√°-los na nossa interface gr√°fica. N√£o importa muito como estes dados est√£o estructurados.‚Äù</p><p name="912b" id="912b" class="graf graf--p graf-after--p">No Firebase, a forma de pensar tem de ser um bocado diferente. <strong class="markup--strong markup--p-strong">Temos de estructurar os nossos dados de acordo com a forma como eles ser√£o visualizados</strong> (dependemos da interface gr√°fica para estructurar a nossa base de dados).<br>Mas muitas vezes, √© um bocado complicado fazer isso. E √© por isso que existem <strong class="markup--strong markup--p-strong">Queries</strong>.</p><p name="21ad" id="21ad" class="graf graf--p graf-after--p">Na realtime database, a Query d√°-nos mais op√ß√µes ao ler dados, como ordenar e filtrar dados (tal como o comando WHERE do SQL). Para fazer isso no android, utilizamos a classe <strong class="markup--strong markup--p-strong">Query</strong>.</p><h4 name="d291" id="d291" class="graf graf--h4 graf-after--p"><a href="https://firebase.google.com/docs/database/android/lists-of-data#data-order" data-href="https://firebase.google.com/docs/database/android/lists-of-data#data-order" class="markup--anchor markup--h4-anchor" rel="noopener" target="_blank">Ordenar dados</a></h4><p name="2d91" id="2d91" class="graf graf--p graf-after--h4">Para ordenar dados, temos 3 m√©todos (fun√ß√µes):</p><ol class="postList"><li name="f5d6" id="f5d6" class="graf graf--li graf-after--p">orderByChild()‚Ää‚Äî‚Ääordena de acordo com o valor de um dos atributos</li><li name="693c" id="693c" class="graf graf--li graf-after--li">orderByKey()‚Ää‚Äî‚Ääordena de acordo com a chave prim√°ria</li><li name="bab6" id="bab6" class="graf graf--li graf-after--li">orderByValue()‚Ää‚Äî‚Ääordena de acordo com o valor de cada n√≥</li></ol><h4 name="11f9" id="11f9" class="graf graf--h4 graf-after--li"><a href="https://firebase.google.com/docs/database/android/lists-of-data#filtering_data" data-href="https://firebase.google.com/docs/database/android/lists-of-data#filtering_data" class="markup--anchor markup--h4-anchor" rel="noopener" target="_blank">Filtrar dados</a></h4><p name="7b0f" id="7b0f" class="graf graf--p graf-after--h4">Para filtrar os dados, o firebase nos oferece 5 m√©todos:</p><ol class="postList"><li name="48f6" id="48f6" class="graf graf--li graf-after--p">limitToFirst()‚Ää‚Äî‚Ääpermite-nos limitar quantos registros pretendemos ler (retorna os primeiros resultados);</li><li name="2499" id="2499" class="graf graf--li graf-after--li">limitToLast()‚Ää‚Äî‚Ääfunciona como o m√©todo acima, mas retorna os √∫ltimos resultados;</li><li name="7c65" id="7c65" class="graf graf--li graf-after--li">startAt()‚Ää‚Äî‚Äämais para definir intervalos. Especifica-se o valor por onde deve come√ßar.</li><li name="dcc3" id="dcc3" class="graf graf--li graf-after--li">endAt()‚Ää‚Äî‚Ääespecifica-se o valor onde o intervalo termina.</li><li name="4625" id="4625" class="graf graf--li graf-after--li">equalTo()‚Ää‚Äî‚Ääretorna o resultado que for igual ao valor que passamos por parametro.</li></ol><h3 name="f2b6" id="f2b6" class="graf graf--h3 graf--startsWithDoubleQuote graf-after--li">‚ÄúN√£o percebi nada. Tem exemplos?‚Äù</h3><figure name="f4c2" id="f4c2" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*R9L5Pw4Bg6_FaVcKQcsYcg.gif" data-width="213" data-height="210" src="https://cdn-images-1.medium.com/max/800/1*R9L5Pw4Bg6_FaVcKQcsYcg.gif"></figure><p name="9ae9" id="9ae9" class="graf graf--p graf-after--figure">Confesso que quando li acerca destes m√©todos na documenta√ß√£o, tamb√©m n√£o percebi quase nada. Mas depois de utiliz√°-los na pr√°tica, deu para perceber como funcionam. Por isso, vamos ver algumas queries SQL e como convert√™-las para o Firebase.</p><p name="f81b" id="f81b" class="graf graf--p graf-after--p">Para aceder √† base de dados no Java, vou deixar aqui a refer√™ncia para a ra√≠z da base de dados que ser√° utilizada em todos os exemplos:</p><pre name="a63f" id="a63f" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">DatabaseReference</strong> raiz = <strong class="markup--strong markup--pre-strong">FirebaseDatabase</strong>.<em class="markup--em markup--pre-em">getInstance</em>().<em class="markup--em markup--pre-em">getReference</em>();</pre><p name="195c" id="195c" class="graf graf--p graf-after--pre">Vamos utilizar a mesma base de dados do <a href="https://medium.com/p/4ee3d26a3d15" data-href="https://medium.com/p/4ee3d26a3d15" class="markup--anchor markup--p-anchor" target="_blank">artigo anterior</a>:</p><figure name="2d57" id="2d57" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*LCQ62dtqQefnWpFZFO7fmA.png" data-width="1150" data-height="239" src="https://cdn-images-1.medium.com/max/800/1*LCQ62dtqQefnWpFZFO7fmA.png"><figcaption class="imageCaption">As tabelas em¬†SQL</figcaption></figure><figure name="b797" id="b797" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*_ev9mJKUXAY0XCr_flPUkQ.png" data-width="791" data-height="594" src="https://cdn-images-1.medium.com/max/800/1*_ev9mJKUXAY0XCr_flPUkQ.png"><figcaption class="imageCaption">A √°rvore JSON no¬†firebase</figcaption></figure><h4 name="7be6" id="7be6" class="graf graf--h4 graf-after--figure">1. Ler o primeiro grupo de estudo que tem o nome ‚ÄúAnalise Matematica‚Äù</h4><p name="adab" id="adab" class="graf graf--p graf-after--h4"><strong class="markup--strong markup--p-strong">Em SQL:</strong></p><pre name="e375" id="e375" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">SELECT</strong> * <strong class="markup--strong markup--pre-strong">FROM</strong> grupos<strong class="markup--strong markup--pre-strong"> WHERE</strong> nome = &quot;Analise Matematica&quot; <strong class="markup--strong markup--pre-strong">LIMIT</strong> 1;</pre><p name="734b" id="734b" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">No Firebase para Android:</strong></p><pre name="245c" id="245c" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">Query</strong> query1 = raiz.<em class="markup--em markup--pre-em">child</em>(&quot;grupos&quot;).<em class="markup--em markup--pre-em">orderByChild</em>(&quot;nome&quot;).<em class="markup--em markup--pre-em">equalTo</em>(&quot;Analise Matematica&quot;).<em class="markup--em markup--pre-em">limitToFirst</em>(1);<br>query1.<em class="markup--em markup--pre-em">addListenerForSingleValueEvent</em>(new <strong class="markup--strong markup--pre-strong">ValueEventListener</strong>() {<br>    @Override<br>    public void <em class="markup--em markup--pre-em">onDataChange</em>(<strong class="markup--strong markup--pre-strong">DataSnapshot</strong> dataSnapshot) {<br>           //Passar os dados para a interface grafica</pre><pre name="a455" id="a455" class="graf graf--pre graf-after--pre">}<br><br>    @Override<br>    public void <em class="markup--em markup--pre-em">onCancelled</em>(<strong class="markup--strong markup--pre-strong">DatabaseError</strong> databaseError) {<br>     //Se ocorrer um erro<br>    }<br>});</pre><h4 name="bcab" id="bcab" class="graf graf--h4 graf-after--pre">2. Encontrar um usu√°rio pelo¬†email</h4><p name="bf68" id="bf68" class="graf graf--p graf-after--h4"><strong class="markup--strong markup--p-strong">Em SQL:</strong></p><pre name="4f03" id="4f03" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">SELECT</strong> * <strong class="markup--strong markup--pre-strong">FROM</strong> usuarios <strong class="markup--strong markup--pre-strong">WHERE</strong> email = &quot;maria@email.com&quot;;</pre><p name="4bf3" id="4bf3" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">No Firebase para android:</strong></p><pre name="cc62" id="cc62" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">Query</strong> query2 = raiz.<em class="markup--em markup--pre-em">child</em>(&#39;usuarios&#39;).<em class="markup--em markup--pre-em">orderByChild</em>(&#39;email&#39;).<em class="markup--em markup--pre-em">equalTo</em>(&#39;alice@email.com&#39;);<br>//Depois basta colocar o listener para ter acesso aos dados</pre><h4 name="5a0f" id="5a0f" class="graf graf--h4 graf-after--pre">3. Obter 5¬†grupos</h4><p name="e62d" id="e62d" class="graf graf--p graf-after--h4"><strong class="markup--strong markup--p-strong">Em SQL:</strong></p><pre name="98bf" id="98bf" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">SELECT</strong> * <strong class="markup--strong markup--pre-strong">FROM</strong> grupos <strong class="markup--strong markup--pre-strong">LIMIT</strong> 5;</pre><p name="2a80" id="2a80" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">No Firebase para android:</strong></p><pre name="9386" id="9386" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">Query</strong> query3 = raiz.<em class="markup--em markup--pre-em">child</em>(&#39;grupos&#39;).<em class="markup--em markup--pre-em">limitToFirst</em>(5);</pre><h4 name="b7a9" id="b7a9" class="graf graf--h4 graf-after--pre">4. Encontrar todos os usu√°rios cujo nome come√ßa com¬†‚ÄòR‚Äô</h4><p name="50aa" id="50aa" class="graf graf--p graf-after--h4"><strong class="markup--strong markup--p-strong">Em SQL:</strong></p><pre name="4dfc" id="4dfc" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">SELECT</strong> * <strong class="markup--strong markup--pre-strong">FROM</strong> usuarios <strong class="markup--strong markup--pre-strong">WHERE</strong> nome <strong class="markup--strong markup--pre-strong">LIKE</strong> &#39;R%&#39;;</pre><p name="916b" id="916b" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">No Firebase para android:</strong></p><pre name="ba49" id="ba49" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">Query</strong> query4 = raiz.<em class="markup--em markup--pre-em">child</em>(&#39;usuarios&#39;).<em class="markup--em markup--pre-em">orderByChild</em>(&#39;nome&#39;).<em class="markup--em markup--pre-em">startAt</em>(&#39;R&#39;);</pre><h4 name="1397" id="1397" class="graf graf--h4 graf-after--pre">5. Encontrar todos os usu√°rios com menos de 20¬†anos</h4><p name="f333" id="f333" class="graf graf--p graf-after--h4"><strong class="markup--strong markup--p-strong">Em SQL:</strong></p><pre name="a51b" id="a51b" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">SELECT</strong> * <strong class="markup--strong markup--pre-strong">FROM</strong> usuarios <strong class="markup--strong markup--pre-strong">WHERE</strong> idade &lt; 20;</pre><p name="39f0" id="39f0" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">No Firebase para android:</strong></p><pre name="ab9c" id="ab9c" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">Query</strong> query5 = raiz.<em class="markup--em markup--pre-em">child</em>(&#39;usuarios&#39;).<em class="markup--em markup--pre-em">orderByChild</em>(&#39;idade&#39;).<em class="markup--em markup--pre-em">endAt</em>(19);//endAt 19 indica que n√£o podemos passar de 19. 20 n√£o serve.</pre><p name="87af" id="87af" class="graf graf--p graf-after--pre">Se quisessemos encontrar todos os usu√°rios com mais de 20 anos, usariamos <em class="markup--em markup--p-em">startAt(21).</em></p><h4 name="6d9e" id="6d9e" class="graf graf--h4 graf-after--p">6. Encontrar todos os usu√°rios cuja idade est√° entre 25 a 50¬†anos</h4><p name="3522" id="3522" class="graf graf--p graf-after--h4"><strong class="markup--strong markup--p-strong">Em SQL:</strong></p><pre name="6137" id="6137" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">SELECT</strong> * <strong class="markup--strong markup--pre-strong">FROM</strong> usuarios <strong class="markup--strong markup--pre-strong">WHERE</strong> idade&gt;=25 <strong class="markup--strong markup--pre-strong">AND</strong> idade&lt;=50</pre><p name="04e5" id="04e5" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">No Firebase para android:</strong></p><pre name="9216" id="9216" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">Query</strong> query6 = raiz.<em class="markup--em markup--pre-em">child</em>(&#39;usuarios&#39;).<em class="markup--em markup--pre-em">orderByChild</em>(&#39;idade&#39;).<em class="markup--em markup--pre-em">startAt</em>(25).<em class="markup--em markup--pre-em">endAt</em>(50);</pre><p name="8460" id="8460" class="graf graf--p graf-after--pre">Espero que os exemplos estejam claros e de f√°cil compreens√£o. Mas voc√™ deve ter reparado que aqui n√£o foram abrangidas certas queries, como por exemplo: ‚ÄúComo encontrar todos os usu√°rios com 21 anos e que vivem em Maputo?‚Äù, ‚ÄúComo encontrar os participantes de cada grupo de estudo?‚Äù, ou ‚ÄúComo saber quais s√£o os grupos de estudo em que cada usu√°rio participa?‚Äù.</p><p name="6797" id="6797" class="graf graf--p graf-after--p graf--trailing">Bom, tais queries envolveriam algumas altera√ß√µes na nossa base de dados, por isso que deixo esse assunto para <a href="https://medium.com/p/8f16935b3023" data-href="https://medium.com/p/8f16935b3023" class="markup--anchor markup--p-anchor" target="_blank">o pr√≥ximo artigo</a>. Nele vamos acrescentar algumas coisas na base de dados para queries avan√ßadas.</p></div></div></section><section name="390a" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="2247" id="2247" class="graf graf--p graf--leading graf--trailing">Caso tenha alguma d√∫vida ou sugest√£o, deixe abaixo nos coment√°rios. Se voc√™ estiver tentando usar a Realtime Database e teve um problema, <a href="https://pt.stackoverflow.com/questions/ask?tags=firebase" data-href="https://pt.stackoverflow.com/questions/ask?tags=firebase" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">coloque ele no StackOverflow</a>, explicando o que voc√™ fez e qual foi o erro que teve. De certeza que voc√™ obter√° ajuda de mim ou de algu√©m da comunidade. üôÇ</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@thatfire.dev" class="p-author h-card">Ros√°rio Pereira Fernandes</a> on <a href="https://medium.com/p/8bab8efd1e95"><time class="dt-published" datetime="2017-01-01T16:02:00.587Z">January 1, 2017</time></a>.</p><p><a href="https://medium.com/@thatfire.dev/firebasesql-8bab8efd1e95" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 24, 2025.</p></footer></article></body></html>