<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Firebase Database para Desenvolvedores SQL‚Ää‚Äî‚ÄäDenormaliza√ß√£o</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Firebase Database para Desenvolvedores SQL‚Ää‚Äî‚ÄäDenormaliza√ß√£o</h1>
</header>
<section data-field="subtitle" class="p-summary">
Uma s√©rie para desenvolvedores SQL poderem come√ßar a utilizar o Firebase.
</section>
<section data-field="description" class="p-summary">
De certeza que todos os desenvolvedores SQL conhecem o conceito ‚ÄúNormaliza√ß√£o‚Äù, que consiste em evitar a duplica√ß√£o de dados. Mas no Firebase, utilizamos um conceito inverso: a denormaliza√ß√£o.
</section>
<section data-field="body" class="e-content">
<section name="6b05" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><figure name="cc64" id="cc64" class="graf graf--figure graf--leading"><img class="graf-image" data-image-id="1*WykjBQh5fR24LaOfXraprA.png" data-width="1043" data-height="313" src="https://cdn-images-1.medium.com/max/800/1*WykjBQh5fR24LaOfXraprA.png"></figure><h3 name="b618" id="b618" class="graf graf--h3 graf-after--figure graf--title">Firebase Database para Desenvolvedores SQL‚Ää‚Äî‚ÄäDenormaliza√ß√£o</h3><p name="59fc" id="59fc" class="graf graf--p graf-after--h3 graf--trailing"><strong class="markup--strong markup--p-strong">ATEN√á√ÉO! O FIREBASE TEM AGORA O </strong><a href="https://medium.com/android-dev-moz/firestore-8d225062ffe8" data-href="https://medium.com/android-dev-moz/firestore-8d225062ffe8" class="markup--anchor markup--p-anchor" target="_blank"><strong class="markup--strong markup--p-strong">CLOUD FIRESTORE</strong></a><strong class="markup--strong markup--p-strong"> QUE √â UM SERVI√áO DE BASE DE DADOS MAIS SIMPLES DE ESTRUTURAR. SE VOC√ä ESTIVER A COME√áAR UM PROJECTO, RECOMENDO QUE UTILIZE O </strong><a href="https://medium.com/android-dev-moz/firestore-8d225062ffe8" data-href="https://medium.com/android-dev-moz/firestore-8d225062ffe8" class="markup--anchor markup--p-anchor" target="_blank"><strong class="markup--strong markup--p-strong">FIRESTORE</strong></a><strong class="markup--strong markup--p-strong"> AO INV√âS DA REALTIME DATABASE.</strong></p></div></div></section><section name="a9d0" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="021f" id="021f" class="graf graf--p graf--leading">De certeza que todos os desenvolvedores SQL conhecem o conceito ‚Äú<strong class="markup--strong markup--p-strong">Normaliza√ß√£o</strong>‚Äù, que consiste em evitar a duplica√ß√£o desnecess√°ria de dados. Mas no Firebase, utilizamos um conceito inverso: <strong class="markup--strong markup--p-strong">a denormaliza√ß√£o</strong>.</p><p name="7a88" id="7a88" class="graf graf--p graf-after--p">Sim, √© isso mesmo. Muitas vezes no Firebase temos de duplicar dados para simplificar e/ou reduzir queries.</p><p name="e2fb" id="e2fb" class="graf graf--p graf-after--p">Vamos olhar para o exemplo do <a href="https://medium.com/p/8f16935b3023/" data-href="https://medium.com/p/8f16935b3023/" class="markup--anchor markup--p-anchor" target="_blank">artigo anterior</a>. Lembre-se que para fazer a jun√ß√£o de dados de 2 n√≥s diferentes, n√≥s colocamos uma leitura de dentro de outra. Isto funciona com poucos dados. Mas se estivermos a executar esta query v√°rias vezes, ou em um n√≥ com uma grande quantidade de dados, voc√™ ter√° que eliminar a leitura que est√° dentro da outra e ler os dados apenas uma vez.</p><p name="e1ae" id="e1ae" class="graf graf--p graf-after--p">Mas actualmente, n√£o √© poss√≠vel ler apenas uma vez, porque dentro do n√≥ ‚Äúestudantes‚Äù temos apenas o nome do usu√°rio e n√£o todos os dados. Mas e se ao inv√©s de armazenar apenas o nome, armazenassemos todos os dados do usu√°rio? Assim, poderiamos fazer apenas uma leitura e obter√≠amos todos os dados que precisamos.</p><figure name="3dde" id="3dde" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*V3rVoMFM80-LjHZczO5VYw.png" data-width="411" data-height="484" src="https://cdn-images-1.medium.com/max/800/1*V3rVoMFM80-LjHZczO5VYw.png"></figure><h4 name="9245" id="9245" class="graf graf--h4 graf-after--figure">Quando denormalizar?</h4><p name="4e3a" id="4e3a" class="graf graf--p graf-after--h4">Bom, √© como eu digo desde a <a href="https://medium.com/p/8bab8efd1e95" data-href="https://medium.com/p/8bab8efd1e95" class="markup--anchor markup--p-anchor" target="_blank">parte 2 desta s√©rie</a>:</p><blockquote name="ef17" id="ef17" class="graf graf--blockquote graf-after--p"><strong class="markup--strong markup--blockquote-strong">Temos de estructurar os nossos dados de acordo com a forma como eles ser√£o visualizados</strong></blockquote><p name="4572" id="4572" class="graf graf--p graf-after--blockquote">Ent√£o eu criei uma interface para servir de exemplo:</p><figure name="907d" id="907d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*iLT37St-fBR_KjnxVbONdg.png" data-width="1010" data-height="546" src="https://cdn-images-1.medium.com/max/800/1*iLT37St-fBR_KjnxVbONdg.png"></figure><p name="b015" id="b015" class="graf graf--p graf-after--figure">Repare que no topo de aplica√ß√£o temos algumas abas, onde podemos ver os grupos de estudo de cada cidade. Para ter todos os grupos de Maputo, voc√™ provavelmente faria uma Query com <code class="markup--code markup--p-code u-paddingRight0 u-marginRight0"><em class="markup--em markup--p-em">orderByChild</em>(‚Äúcidade‚Äù).<em class="markup--em markup--p-em">equalTo</em>(‚Äúmaputo‚Äù)</code>.</p><p name="4dfa" id="4dfa" class="graf graf--p graf-after--p">Mas ao inv√©s de fazer queries, voc√™ pode <strong class="markup--strong markup--p-strong">denormalizar</strong>. Isso significa criar um novo n√≥ onde os grupos est√£o organizados de acordo com a cidade. Assim:</p><figure name="32b0" id="32b0" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*7A_d4dRgSfI4JPnA8Vu_YQ.png" data-width="800" data-height="380" src="https://cdn-images-1.medium.com/max/800/1*7A_d4dRgSfI4JPnA8Vu_YQ.png"></figure><p name="7768" id="7768" class="graf graf--p graf-after--figure">Desta forma, para obter todos os grupos sediados em Maputo √© s√≥ fazer uma leitura directa:</p><pre name="31c4" id="31c4" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">DatabaseReference</strong> db1 = raiz.<em class="markup--em markup--pre-em">child</em>(&quot;cidade_grupos/maputo&quot;);</pre><p name="5e67" id="5e67" class="graf graf--p graf-after--pre">E a vantagem disto √© que agora podemos fazer outras queries, pois ainda temos os outros atributos dos grupos.</p><h4 name="3360" id="3360" class="graf graf--h4 graf-after--p">Se os dados est√£o duplicados, como posso garantir que quando altero um n√≥, os dados do outro n√≥ sejam alterados tamb√©m?</h4><p name="4fd5" id="4fd5" class="graf graf--p graf-after--h4">Essa √© uma quest√£o bastante comum, pois se alterarmos o nome de um grupo no n√≥ ‚Äúgrupos‚Äù, essa altera√ß√£o n√£o ir√° se reflectir no n√≥ ‚Äúcidade_grupos‚Äù. Ent√£o, como vamos garantir a consist√™ncia de dados assim?</p><p name="16f1" id="16f1" class="graf graf--p graf-after--p graf--trailing">A resposta desta quest√£o fica para o <a href="https://medium.com/p/59aa4a865279/" data-href="https://medium.com/p/59aa4a865279/" class="markup--anchor markup--p-anchor" target="_blank">pr√≥ximo artigo</a>, onde vamos aprender a garantir a <strong class="markup--strong markup--p-strong">consist√™ncia dos nossos dados</strong>, utilizando <strong class="markup--strong markup--p-strong">lookups </strong>e<strong class="markup--strong markup--p-strong"> multi-path updates</strong> (algo como ‚Äúactualiza√ß√£o em m√∫ltiplos n√≥s‚Äù).</p></div></div></section><section name="ff45" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="d893" id="d893" class="graf graf--p graf--leading graf--trailing">Caso tenha alguma d√∫vida ou sugest√£o, deixe abaixo nos coment√°rios. Se voc√™ estiver tentando usar a Realtime Database e teve um problema, <a href="https://pt.stackoverflow.com/questions/ask?tags=firebase" data-href="https://pt.stackoverflow.com/questions/ask?tags=firebase" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">coloque ele no StackOverflow</a>, explicando o que voc√™ fez e qual foi o erro que teve. De certeza que voc√™ obter√° ajuda de mim ou de algu√©m da comunidade. üôÇ</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@thatfire.dev" class="p-author h-card">Ros√°rio Pereira Fernandes</a> on <a href="https://medium.com/p/39c882550f11"><time class="dt-published" datetime="2017-01-01T16:02:00.578Z">January 1, 2017</time></a>.</p><p><a href="https://medium.com/@thatfire.dev/firebasesql-39c882550f11" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 24, 2025.</p></footer></article></body></html>