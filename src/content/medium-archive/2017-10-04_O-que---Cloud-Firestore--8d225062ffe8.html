<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>O que √© Cloud Firestore?</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">O que √© Cloud Firestore?</h1>
</header>
<section data-field="subtitle" class="p-summary">
Conhe√ßa o novo servi√ßo de armazenamento de dados do Firebase
</section>
<section data-field="body" class="e-content">
<section name="1807" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><figure name="014d" id="014d" class="graf graf--figure graf--leading"><img class="graf-image" data-image-id="1*EtvPAj7PBPX8-QJ0IiTryA.png" data-width="800" data-height="240" src="https://cdn-images-1.medium.com/max/800/1*EtvPAj7PBPX8-QJ0IiTryA.png"></figure><h3 name="6746" id="6746" class="graf graf--h3 graf-after--figure graf--title">O que √© Cloud Firestore?</h3><h4 name="02ed" id="02ed" class="graf graf--h4 graf-after--h3 graf--subtitle">Conhe√ßa o novo servi√ßo de armazenamento de dados do¬†Firebase</h4><p name="ea46" id="ea46" class="graf graf--p graf-after--h4">Tinha acabo de voltar da faculdade quando conectei-me √† internet e recebi a notifica√ß√£o do Youtube: ‚Äú<em class="markup--em markup--p-em">Firebase just published: Introducing Firestore</em>‚Äù. Fiquei curioso e fui ver o que √© o tal de Firestore.</p><figure name="2597" id="2597" class="graf graf--figure graf--iframe graf-after--p"><iframe src="https://www.youtube.com/embed/QcsAb2RR52c?feature=oembed" width="700" height="393" frameborder="0" scrolling="no"></iframe></figure><p name="a8da" id="a8da" class="graf graf--p graf-after--figure">O video explica que o Firestore √© um servi√ßo que armazena dados NoSQL na Cloud em formato JSON, mas com uma organiza√ß√£o diferente: Cole√ß√µes e Documentos.</p><p name="fbb2" id="fbb2" class="graf graf--p graf-after--p">Ent√£o a√≠ vieram-me as quest√µes:</p><ol class="postList"><li name="e7d1" id="e7d1" class="graf graf--li graf-after--p">Porque um novo servi√ßo de armazenamento de dados NoSQL, se o Firebase j√° tem a <a href="https://medium.com/@mungoidario/realtime-databases-part-1-9a8f1ed171b2" data-href="https://medium.com/@mungoidario/realtime-databases-part-1-9a8f1ed171b2" class="markup--anchor markup--li-anchor" target="_blank">Realtime Database</a>?</li><li name="eeac" id="eeac" class="graf graf--li graf-after--li">Ser√° que finalmente temos um servi√ßo que permita procura por texto numa base de dados NoSQL?</li></ol><p name="7e34" id="7e34" class="graf graf--p graf-after--li">Procurei ent√£o por respostas para estas perguntas e elas me levaram √† mais perguntas, o que resultou em cerca de 1 hora a entender melhor o assunto: <a href="https://firebase.google.com/docs/firestore/" data-href="https://firebase.google.com/docs/firestore/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Lendo a documenta√ß√£o</a>, vendo os <a href="https://www.youtube.com/watch?v=kDZYIhNkQoM" data-href="https://www.youtube.com/watch?v=kDZYIhNkQoM" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">novos v√≠deos</a> no <a href="https://www.youtube.com/user/Firebase" data-href="https://www.youtube.com/user/Firebase" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">canal do Firebase</a> e at√© dando alguns tweets para os engenheiros do Firebase. [No momento em que eu escrevia este artigo, eles publicaram <a href="https://firebase.googleblog.com/2017/10/cloud-firestore-for-rtdb-developers.html" data-href="https://firebase.googleblog.com/2017/10/cloud-firestore-for-rtdb-developers.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">um artigo para responder √† quest√£o 1</a>]</p><figure name="6936" id="6936" class="graf graf--figure graf--iframe graf-after--p"><blockquote class="twitter-tweet"><a href="https://twitter.com/_rpfernandes/status/915273600063729670"></a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><figcaption class="imageCaption">Thank you Lauren Long for you reply</figcaption></figure><p name="c4fa" id="c4fa" class="graf graf--p graf-after--figure">Ent√£o decidi por isto em ‚Äúpratos limpos‚Äù para voc√™, que provavelmente tem as mesmas quest√µes.</p><h3 name="c0b7" id="c0b7" class="graf graf--h3 graf-after--p">Como funciona?</h3><p name="be35" id="be35" class="graf graf--p graf-after--h3">Como j√° tinha dito antes: o Firestore armazena dados NoSQL com a sintaxe JSON. Mas o Firestore tem uma estrutura diferente da Realtime Database: os dados s√£o divididos em cole√ß√µes(collections) e documentos(documents) ao inv√©s de n√≥s (nodes). Vamos ent√£o tentar entender estes 2 conceitos.</p><h4 name="2cc3" id="2cc3" class="graf graf--h4 graf-after--p">Documentos</h4><p name="5ff5" id="5ff5" class="graf graf--p graf-after--h4">Documento √© como se fosse um objecto (sim, aquele a que estamos acostumados). Em cada objecto temos alguns valores com as suas respectivas chaves. Estes valores podem ser do tipo boolean, byte, int, float, String, arrays, datas e at√© null. [<a href="https://firebase.google.com/docs/firestore/manage-data/data-types" data-href="https://firebase.google.com/docs/firestore/manage-data/data-types" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">veja todos os tipos na documenta√ß√£o</a>]</p><figure name="15c4" id="15c4" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*WlnFnJrkd9RLLf7vIUoELw.png" data-width="480" data-height="319" src="https://cdn-images-1.medium.com/max/800/1*WlnFnJrkd9RLLf7vIUoELw.png"><figcaption class="imageCaption">Exemplo de um documento</figcaption></figure><h4 name="4837" id="4837" class="graf graf--h4 graf-after--figure">Cole√ß√µes</h4><p name="680e" id="680e" class="graf graf--p graf-after--h4">As cole√ß√µes nada mais s√£o do que um conjunto destes documentos:</p><figure name="1821" id="1821" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*sW0OqSXeblSg1sN2zoAhxA.png" data-width="640" data-height="180" src="https://cdn-images-1.medium.com/max/800/1*sW0OqSXeblSg1sN2zoAhxA.png"><figcaption class="imageCaption">Exemplo de uma cole√ß√£o de utilizadores</figcaption></figure><p name="5f95" id="5f95" class="graf graf--p graf-after--figure">Mas existem algumas regras aqui. As cole√ß√µes n√£o podem conter outras cole√ß√µes e os documentos n√£o podem conter outros documentos. Sendo assim, uma cole√ß√£o s√≥ pode conter documentos e os documentos s√≥ podem conter sub-cole√ß√µes, tal como demonstra o esquema abaixo:</p><figure name="34f6" id="34f6" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*a_9oi13tFJ07GKEX1cq02A.png" data-width="800" data-height="400" src="https://cdn-images-1.medium.com/max/800/1*a_9oi13tFJ07GKEX1cq02A.png"><figcaption class="imageCaption">Estrutura do Firestore: Cole√ß√µes (amarelo) e documentos (azul)</figcaption></figure><p name="7833" id="7833" class="graf graf--p graf-after--figure">Vejamos ent√£o um exemplo pr√°tico desta estrutura:</p><figure name="e090" id="e090" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*YPoqCxWoF8ycnKZMPK-V8w.png" data-width="800" data-height="400" src="https://cdn-images-1.medium.com/max/800/1*YPoqCxWoF8ycnKZMPK-V8w.png"></figure><p name="3fa3" id="3fa3" class="graf graf--p graf-after--figure">A cole√ß√£o utilizadores possui 3 utilizadores. Cada utilizador contem uma sub-cole√ß√£o de frotas que lhe pertencem. Cada frota tem uma sub-cole√ß√£o de carros existentes nessa frota.</p><p name="d8c8" id="d8c8" class="graf graf--p graf-after--p">Para quem est√° habituado a utilizar a realtime database, tal como eu, deve ter ficado assustado com o n√∫mero de sub-n√≥s que s√£o criados aqui. Mas n√£o se preocupe porque √© assim mesmo que esta estrutura funciona. Isto serve para facilitar na hora de executar queries e filtrar dados.</p><h3 name="9e60" id="9e60" class="graf graf--h3 graf-after--p">Firestore vs. Realtime¬†Database</h3><p name="4b03" id="4b03" class="graf graf--p graf-after--h3">Uma das vantagens do Firestore √© que temos mais possibilidades na hora de realizar queries e filtragens de dados. Na Realtime Database √©ramos limitados √† queries e filtros utilizando apenas um atributo e/ou uma condi√ß√£o:</p><pre name="4451" id="4451" class="graf graf--pre graf-after--p">utilizadoresRef.orderByChild(&quot;cidade&quot;).equalTo(&quot;Maputo&quot;);</pre><p name="a7d7" id="a7d7" class="graf graf--p graf-after--pre">Aqui podemos filtrar com base em mais de um atributo e/ou condi√ß√£o:</p><pre name="7eec" id="7eec" class="graf graf--pre graf-after--p">utilizadoresRef.whereEqualTo(&quot;cidade&quot;, &quot;Maputo&quot;).whereLessThan(&quot;idade&quot;, 19);</pre><p name="f17c" id="f17c" class="graf graf--p graf-after--pre"><em class="markup--em markup--p-em">Al√©m destas filtragens, eu gostaria tamb√©m de fazer uma procura por texto na base de dados. Mas segundo </em><a href="https://firebase.google.com/docs/firestore/solutions/search" data-href="https://firebase.google.com/docs/firestore/solutions/search" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><em class="markup--em markup--p-em">a documenta√ß√£o</em></a><em class="markup--em markup--p-em">, isso s√≥ √© poss√≠vel utilizando o </em><a href="https://medium.com/@rosariopfernandes/firebase-cloud-functions-f6ed3787fa8d" data-href="https://medium.com/@rosariopfernandes/firebase-cloud-functions-f6ed3787fa8d" class="markup--anchor markup--p-anchor" target="_blank"><em class="markup--em markup--p-em">Cloud Functions</em></a><em class="markup--em markup--p-em"> + servi√ßos terceiros como </em><a href="http://algolia.com" data-href="http://algolia.com" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><em class="markup--em markup--p-em">Algolia</em></a><em class="markup--em markup--p-em"> e </em><a href="http://elastic.co" data-href="http://elastic.co" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><em class="markup--em markup--p-em">ElasticSearch</em></a><em class="markup--em markup--p-em"> (tal como na Realtime Database).</em></p><p name="b8db" id="b8db" class="graf graf--p graf-after--p">Creio que as queries com mais de um atributo sejam a principal diferen√ßa do Firestore em rela√ß√£o √† Realtime Database. Mas existem outras:</p><ul class="postList"><li name="7a18" id="7a18" class="graf graf--li graf-after--p">Ao ler um documento no Firestore, s√≥ os dados desse documento s√£o transferidos para o cliente; todas as sub-cole√ß√µes s√£o ignoradas. (resultando numa query de boa performance). Enquanto que na Realtime Database, ao ler um n√≥ transferimos todos os sub-n√≥s para o cliente e dependendo n√∫mero de sub-n√≥s desse n√≥ poder√≠amos vir a ter problemas de performance.</li><li name="c757" id="c757" class="graf graf--li graf-after--li">Al√©m de ter suporte para dados offline no Android e iOS, o Firestore suporta tamb√©m o armazenamento offline para Web.</li><li name="add0" id="add0" class="graf graf--li graf-after--li">O modelo de pre√ßo √© diferente: Realtime Database cobra por <strong class="markup--strong markup--li-strong">banda utilizada</strong> e pelo <strong class="markup--strong markup--li-strong">tamanho dos dados</strong> armazenados, enquanto que o Firestore cobra pelas <strong class="markup--strong markup--li-strong">opera√ß√µes</strong>(leitura, escrita e elimina√ß√£o) que s√£o realizadas nas base de dados (independentemente do seu sucesso), a <strong class="markup--strong markup--li-strong">banda utilizada</strong> e o <strong class="markup--strong markup--li-strong">tamanho dos dados</strong> armazenados.</li></ul><p name="e36e" id="e36e" class="graf graf--p graf-after--li">O surgimento do Firestore n√£o significa que a Realtime Database deixar√° de existir. Voc√™ pode utilizar os 2 em simult√¢neo ou escolher qual deles melhor responde √† sua necessidade.</p><p name="ddee" id="ddee" class="graf graf--p graf-after--p graf--trailing">E √© isto que eu tinha para este artigo. Os detalhes de como utilizar o Firestore na sua aplica√ß√£o podem ser encontrados <a href="https://firebase.google.com/docs/firestore/quickstart" data-href="https://firebase.google.com/docs/firestore/quickstart" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">na documenta√ß√£o</a>.</p></div></div></section><section name="53e5" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="53c1" id="53c1" class="graf graf--p graf--leading graf--trailing">Caso tenha alguma d√∫vida ou sugest√£o, deixe abaixo nos coment√°rios. Se voc√™ estiver tentando usar o Cloud Firestore e teve um problema, <a href="https://pt.stackoverflow.com/questions/ask?tags=firebase" data-href="https://pt.stackoverflow.com/questions/ask?tags=firebase" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">coloque ele no StackOverflow</a>, explicando o que voc√™ fez e qual foi o erro que teve. De certeza que voc√™ obter√° ajuda de mim ou de algu√©m da comunidade. üôÇ</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@thatfire.dev" class="p-author h-card">Ros√°rio Pereira Fernandes</a> on <a href="https://medium.com/p/8d225062ffe8"><time class="dt-published" datetime="2017-10-04T06:01:02.215Z">October 4, 2017</time></a>.</p><p><a href="https://medium.com/@thatfire.dev/firestore-8d225062ffe8" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 24, 2025.</p></footer></article></body></html>