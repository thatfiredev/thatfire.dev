<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Android Nougat — desenvolver apps tendo em conta as novas funcionalidades</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Android Nougat — desenvolver apps tendo em conta as novas funcionalidades</h1>
</header>
<section data-field="subtitle" class="p-summary">
Recentemente (22 de Agosto de 2016), a Google finalmente começou com a distribuição do seu mais recente sistema operativo para dispositivos…
</section>
<section data-field="body" class="e-content">
<section name="2146" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><figure name="25f9" id="25f9" class="graf graf--figure graf--leading"><img class="graf-image" data-image-id="1*10XD2YQX0Ce5By0ZCDeK1A.png" data-width="1043" data-height="313" src="https://cdn-images-1.medium.com/max/800/1*10XD2YQX0Ce5By0ZCDeK1A.png"></figure><h3 name="c097" id="c097" class="graf graf--h3 graf-after--figure graf--title">Android Nougat — desenvolver apps tendo em conta as novas funcionalidades</h3><p name="5dad" id="5dad" class="graf graf--p graf-after--h3">Recentemente (22 de Agosto de 2016), a Google finalmente começou com a distribuição do seu mais recente sistema operativo para dispositivos móveis: O Android Nougat 7.0 (API 24).</p><p name="3c97" id="3c97" class="graf graf--p graf-after--p">Este sistema veio com <a href="http://android.googleblog.com/2016/08/android-70-nougat-more-powerful-os-made.html" data-href="http://android.googleblog.com/2016/08/android-70-nougat-more-powerful-os-made.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">várias novas funcionalidades</a> (que pudemos testar desde Março de 2016, quando lançaram o Android N Developer Preview): novos emojis, modo multi-janela, quick-switch, direct reply, entre outras.</p><figure name="5057" id="5057" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*8UKtefOIbZVYy7XFPW8P8A.jpeg" data-width="1600" data-height="897" src="https://cdn-images-1.medium.com/max/800/1*8UKtefOIbZVYy7XFPW8P8A.jpeg"><figcaption class="imageCaption">Os novos emojis do Android Nougat</figcaption></figure><p name="d4c7" id="d4c7" class="graf graf--p graf-after--figure">Mas algumas dessas novas funcionalidades causam uma certa preocupação para desenvolvedores: Como preparar a minha aplicação para as novas funcionalidades?</p><p name="cb50" id="cb50" class="graf graf--p graf-after--p graf--trailing">Por isso, neste artigo, procuro explicar como se adaptar à algumas destas funcionalidades.</p></div></div></section><section name="5ca3" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="2f0b" id="2f0b" class="graf graf--h4 graf--leading">Modo Multi-janela (Multi-window Mode)</h4><p name="3587" id="3587" class="graf graf--p graf-after--h4">Isto não é novidade para muitos, pois vários fabricantes já tinham esta funcionalidade nas suas versões do Android. O modo multi-janela permite executar 2 aplicações em simultaneo, lado a lado e o tamanho das janelas é ajustável. Isto significa que o usuário poderá mudar o tamanho da nossa aplicação, então temos de ter uma UI (User Interface) responsiva. Para mais detalhes em como desenhar uma UI responsiva, veja este <a href="https://medium.com/google-developers/building-a-responsive-ui-in-android-7dc7e4efcbb3#.wznmwr23g" data-href="https://medium.com/google-developers/building-a-responsive-ui-in-android-7dc7e4efcbb3#.wznmwr23g" class="markup--anchor markup--p-anchor" target="_blank">artigo (em inglês</a>).</p><p name="051f" id="051f" class="graf graf--p graf-after--p">Quando estiver a desenvolver aplicações, tenha em conta estes 2 tamanhos de janelas:</p><figure name="7859" id="7859" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*2G-yiBT94SqDHL80ikg9sw.png" data-width="718" data-height="720" src="https://cdn-images-1.medium.com/max/800/1*2G-yiBT94SqDHL80ikg9sw.png"></figure><ul class="postList"><li name="5604" id="5604" class="graf graf--li graf-after--figure">Nos telemóveis, a janela tem um <em class="markup--em markup--li-em">aspect ratio</em> 16:9, por isso, tenha em conta que a altura será bastante reduzida, então certifique-se que o usuário terá algo visível e funcional na tela.</li><li name="b32d" id="b32d" class="graf graf--li graf-after--li">Nos tablets, a janela ocupa 34.15% da tela. Tenha em conta que o cumprimento será bastante amplo.</li></ul><p name="95fe" id="95fe" class="graf graf--p graf-after--li">Por padrão, o modo multi-janela está activado para todas as activities da sua aplicação. O menor tamanho que a tela terá é 220x220dp, então certifique-se de que a sua aplicação irá mostrar algo quando estiver nessa resolução.</p><p name="e3cc" id="e3cc" class="graf graf--p graf-after--p">Tenha em mente que sempre que o usuário colocar a nossa aplicação em modo multi-janela, a Activity actual será destruída e recriada. Por isso:</p><ul class="postList"><li name="b2e6" id="b2e6" class="graf graf--li graf-after--p">Evite colocar muito código no método onResume();</li><li name="9b51" id="9b51" class="graf graf--li graf-after--li">Guarde o estado da activity usando o método onSaveInstanceState();</li><li name="6aaf" id="6aaf" class="graf graf--li graf-after--li"><a href="https://dariomungoi.wordpress.com/2015/09/02/desenvolvendo-para-android-utilizando-loaders/" data-href="https://dariomungoi.wordpress.com/2015/09/02/desenvolvendo-para-android-utilizando-loaders/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">Use loaders para manter dados</a>.</li></ul><p name="9799" id="9799" class="graf graf--p graf-after--li">Caso você esteja a desenvolver um jogo ou qualquer aplicação que deva funcionar apenas em tela-cheia (<em class="markup--em markup--p-em">fullscreen</em>), você pode desactivar o modo multi-janela colocando um dos atributos no seu AndroidManifest.xml:</p><pre name="e2a1" id="e2a1" class="graf graf--pre graf-after--p">android:orientation</pre><pre name="afd4" id="afd4" class="graf graf--pre graf-after--pre">android:immersive</pre><p name="8e0f" id="8e0f" class="graf graf--p graf-after--pre">Ou se a sua aplicação usa minSdkVersion=24, você pode usar o atributo:</p><pre name="af42" id="af42" class="graf graf--pre graf-after--p graf--trailing">android:resizeableActivity=”false”;</pre></div></div></section><section name="c020" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="b6bf" id="b6bf" class="graf graf--h4 graf--leading">Notificações com direct-reply (resposta imediata)</h4><p name="2180" id="2180" class="graf graf--p graf-after--h4">Com o direct-reply, você pode responder à mensagens directamente da notificação, sem ter de abrir a aplicação.</p><figure name="a251" id="a251" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*I1LF_bdjBz0ovhLFf7_bwQ.png" data-width="321" data-height="632" src="https://cdn-images-1.medium.com/max/800/1*I1LF_bdjBz0ovhLFf7_bwQ.png"></figure><p name="7ec1" id="7ec1" class="graf graf--p graf-after--figure">Para colocar esta funcionalidade na sua aplicação, você só tem de usar a classe RemoteInput:</p><pre name="3c30" id="3c30" class="graf graf--pre graf-after--p">private static final String KEY_DIRECT_REPLY = “key_direct_reply”;<br>RemoteInput remoteInput = new RemoteInput.Builder(KEY_DIRECT_REPLY)<br>.setLabel(“Responder”)<br>.build();</pre><pre name="7cc5" id="7cc5" class="graf graf--pre graf-after--pre">NotificationCompat.Action action = <br>new NotificationCompat.Action.Builder(R.drawable.reply, <br> “Responder”, pendingIntent)<br>.addRemoteInput(remoteInput)<br>.build();</pre><pre name="f7a7" id="f7a7" class="graf graf--pre graf-after--pre">//aqui tem algum codigo para criar a notificacao<br>notification.addAction(action);</pre><p name="3675" id="3675" class="graf graf--p graf-after--pre">Para receber a mensagem introduzida no RemoteInput, podemos utilizar o método:</p><pre name="2abf" id="2abf" class="graf graf--pre graf-after--p">private String getMensagem(Intent i)</pre><pre name="cb53" id="cb53" class="graf graf--pre graf-after--pre">{</pre><pre name="067f" id="067f" class="graf graf--pre graf-after--pre">Bundle remoteInput = RemoteInput.getResultsFromIntent(i);</pre><pre name="efc5" id="efc5" class="graf graf--pre graf-after--pre">if(remoteInput!=null)</pre><pre name="7672" id="7672" class="graf graf--pre graf-after--pre"> return remoteInput.getCharSequence(KEY_DIRECT_REPLY);</pre><pre name="2b7c" id="2b7c" class="graf graf--pre graf-after--pre">return null;</pre><pre name="bfd9" id="bfd9" class="graf graf--pre graf-after--pre graf--trailing">}</pre></div></div></section><section name="140a" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="3711" id="3711" class="graf graf--h4 graf--leading">Direct Boot</h4><p name="2770" id="2770" class="graf graf--p graf-after--h4">O modo direct boot faz com que as aplicações sejam executadas, mesmo que o dispositivo ainda esteja bloqueado depois de uma reinicialização (reboot).</p><p name="782c" id="782c" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Atenção</strong>: Antes de implementar o Direct Boot, pense se a sua aplicação precisa realmente desta funcionalidade. Os casos mais comuns são aplicações de alarmes, mensagens ou acessibilidade.</p><p name="ac5c" id="ac5c" class="graf graf--p graf-after--p">Para activar o Direct Boot, você deve pensar em quais componentes da aplicação irão ser executados enquanto o ecrã estiver bloqueado. Apenas os componentes que tiverem o atributo <em class="markup--em markup--p-em">directBootAware=”true” (no AndroidManifest.xml) </em>é que serão executados. Como por exemplo:</p><pre name="b0e4" id="b0e4" class="graf graf--pre graf-after--p">&lt;service android:name=”.alarms.AlarmIntentService”</pre><pre name="625c" id="625c" class="graf graf--pre graf-after--pre"> android:directBootAware=”true”&gt;</pre><p name="b3a1" id="b3a1" class="graf graf--p graf-after--pre">Ao usar o Direct Boot, tenha em conta que os dados têm de ser gravados em uma área de memória especial: <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Device Protected</em></strong>.</p><p name="0281" id="0281" class="graf graf--p graf-after--p">Normalmente, os dados da aplicação são guardados no espaço <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Credential Protected</em></strong>. É nesta área onde são guardados dados quando você utilizada métodos como o <em class="markup--em markup--p-em">getFilesDir()</em>.</p><p name="7e6e" id="7e6e" class="graf graf--p graf-after--p">Para ter acesso à área <em class="markup--em markup--p-em">Device Protected</em>, você tem de criar o contexto:</p><pre name="8b9e" id="8b9e" class="graf graf--pre graf-after--p">Context dpContext = context.createDeviceProtectedStorageContext();<br>//Depois chame getFilesDir() apartir desse contexto<br>dpContext.getFilesDir();</pre><p name="42ab" id="42ab" class="graf graf--p graf-after--pre">Se uma versão da sua aplicação tiver dados na <em class="markup--em markup--p-em">Credential Protected</em>, você pode migrá-los para a <em class="markup--em markup--p-em">Device Protected</em> usando os métodos:</p><pre name="4975" id="4975" class="graf graf--pre graf-after--p">Context.moveSharedPreferencesFrom() //para migrar SharedPreferences</pre><pre name="db3e" id="db3e" class="graf graf--pre graf-after--pre">Context.moveDatabaseFrom() //para migrar base de dados</pre><p name="57e8" id="57e8" class="graf graf--p graf-after--pre graf--trailing"><strong class="markup--strong markup--p-strong">Atenção: </strong>Só use a área Device Protected para guardar dados necessários durante a execução do Direct Boot. Todos os outros dados devem ser guardados na Credential Protected.</p></div></div></section><section name="b08a" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="14cf" id="14cf" class="graf graf--p graf--leading">Espero ter deixado uma noção básica de como se preparar para o Android Nougat. Mas a melhor forma de preparar a sua aplicação é testando. Mesmo se você não tiver um Nexus, pode utilizar o Android Nougat no emulador do Android Studio.</p><p name="9894" id="9894" class="graf graf--p graf-after--p">Até a próxima,</p><p name="26f9" id="26f9" class="graf graf--p graf-after--p graf--trailing">Rosário Pereira Fernandes</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@thatfire.dev" class="p-author h-card">Rosário Pereira Fernandes</a> on <a href="https://medium.com/p/7f85bb8b789"><time class="dt-published" datetime="2016-08-23T20:27:25.785Z">August 23, 2016</time></a>.</p><p><a href="https://medium.com/@thatfire.dev/android-nougat-desenvolver-apps-tendo-em-conta-as-novas-funcionalidades-7f85bb8b789" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 24, 2025.</p></footer></article></body></html>